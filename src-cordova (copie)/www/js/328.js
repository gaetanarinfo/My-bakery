"use strict";(globalThis["webpackChunkmy_bakery"]=globalThis["webpackChunkmy_bakery"]||[]).push([[328],{4566:(e,t,s)=>{s.r(t),s.d(t,{default:()=>G});var o=s(1758);function n(e,t,s,n,a,i){const r=(0,o.g2)("HeaderComponent"),c=(0,o.g2)("CreditsComponent"),d=(0,o.g2)("Section7"),l=(0,o.g2)("FooterComponent");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(r),(0,o.bF)(c),(0,o.bF)(d),(0,o.bF)(l)],64)}var a=s(128),i=s(8790),r=s(9104);const c=(0,o.Fv)('<div class="background fadeIn2 bb background6"><div class="content"><h1>Échanger mes crédits</h1><div class="b-breadcrumb"><div class="b-breadcrumb"><ol class="breadcrumb"><li><a href="/">Accueil</a></li><li class="active">Échanger mes crédits</li></ol></div></div></div></div>',1),d={id:"products",class:"credits section fadeIn3"},l={class:"container"},u={class:"row gutters-sm u-column1 mb-5"},m={class:"snip1265"},p=["id"],f={class:"plan-title"},v={class:"plan-cost"},h={class:"plan-price"},b=["innerHTML"],k={class:"plan-select"},g=["onClick"],C={class:"creditsLoad loadingDiv"};function y(e,t,s,n,a,$){const y=(0,o.g2)("BannerComponent"),L=(0,o.g2)("q-spinner-grid");return(0,o.uX)(),(0,o.CE)(o.FK,null,[c,(0,o.Lk)("div",d,[(0,o.Lk)("div",l,[(0,o.bo)((0,o.Lk)("div",u,[(0,o.Lk)("div",m,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.credits,(t=>((0,o.uX)(),(0,o.CE)("div",{id:"product_"+t.id,key:t.id,class:(0,i.C4)(1===t.ahead?"plan featured":"plan")},[(0,o.Lk)("header",null,[(0,o.Lk)("i",{class:(0,i.C4)(t.image)},null,2),(0,o.Lk)("h4",f,(0,i.v_)(t.title),1),(0,o.Lk)("div",v,[(0,o.Lk)("span",h,(0,i.v_)(t.credits,".",",")+" CREDITS",1)])]),(0,o.Lk)("ul",{class:"plan-features",innerHTML:t.content},null,8,b),(0,o.Lk)("div",k,[(0,o.Lk)("a",{onClick:s=>e.removeCredit(t.id)},"Confirmer mon choix",8,g)])],10,p)))),128))])],512),[[r.aG,e.showSimulatedReturnData]]),(0,o.bo)((0,o.bF)(y,{margin:!1,top:!0},null,512),[[r.aG,e.showSimulatedReturnData]]),(0,o.bo)((0,o.Lk)("div",C,[(0,o.bF)(L,{size:"70px",color:"info"})],512),[[r.aG,e.visible]])])])],64)}s(4748);var L=s(1903),w=s(4907),T=s(8734),I=s(6980),x=s(2303),A=s(9776);(0,T.KR)(!1),(0,I.Pj)();const D=(0,o.pM)({name:"CreditsComponent",components:{BannerComponent:A.A},setup(){const e=(0,I.Pj)(),t=(0,w.A)(),s=(0,T.KR)(!1),n=(0,T.KR)(!0),a=(0,o.EW)((()=>e.state.stateUser)),i=(0,o.EW)((()=>e.state.stateUser.user)),r=(0,o.EW)((()=>e.state.credits)),c=(0,o.EW)((()=>e.state.credits_debit));return t.notify.registerType("success-form",{icon:"fa-solid fa-check",progress:!1,color:"green-6",textColor:"white",classes:"glossy",timeout:3500}),t.notify.registerType("error-form",{icon:"fa-solid fa-xmark",progress:!1,color:"red-6",textColor:"white",classes:"glossy",timeout:3500}),{showTextLoading(e=null){s.value=!0,$(".u-column1").fadeOut(300),n.value=!1,null===e&&setTimeout((()=>{s.value=!1,n.value=!0}),2e3)},showNotif(e){t.notify({type:"success-form",message:e})},errorNotif(e=null){t.notify({type:"error-form",message:e||"Une erreur est survenue."})},visible:s,showSimulatedReturnData:n,credits_debit:c,user:i,stateUser:a,credits:r,removeCredit:function(e){x.A.post("https://serveur.my-bakery.fr/credits-debit",{email:this.user.email,id:this.user.id,idProduct:e,idBakery:this.$route.params.id}).then((t=>{!0===t.data.succes?(this.showNotif("Vous avez été débité de "+t.data.credits+" crédits !"),this.showTextLoading(),setTimeout((()=>{this.showTextLoading()}),1e3)):(this.showTextLoading(),this.errorNotif("Vous n'avez pas assez de crédit pour réaliser cette opération !")),!0===t.data.succes&&x.A.post("https://serveur.my-bakery.fr/credits-debit-validate",{email:this.user.email,id:this.user.id,idProduct:e,idBakery:this.$route.params.id}).then((e=>{}))}))}}},data(){(0,I.Pj)();return{}},mounted(){const e=(0,I.Pj)();this.showTextLoading(),null===L.A.getItem("token")?this.$router.push("/"):setTimeout((()=>{e.dispatch("fetchCredits",{email:this.user.email,id:this.user.id,idBakery:this.$route.params.id})}),200)}});var F=s(2807),E=s(3561),R=s(8582),S=s.n(R);const _=(0,F.A)(D,[["render",y]]),K=_;S()(D,"components",{QSpinnerGrid:E.A});var P=s(6025),B=s(6599);const j=(0,o.pM)({name:"Credits",components:{HeaderComponent:a.A,CreditsComponent:K,Section7:B.A,FooterComponent:P.A},mounted(){$("#menu-main-menu").removeAttr("style"),$(document).on("click",".menu-toggle-2:not(.active)",(function(e){e.preventDefault(),$(this).addClass("active"),$("#menu-main-menu").fadeIn(300)})),$(document).on("click",".menu-toggle-2.active",(function(e){e.preventDefault(),$(this).removeClass("active"),$("#menu-main-menu").fadeOut(300)})),$(document).on("click","#menu-main-menu .menu-item",(function(e){$(".menu-toggle-2").removeClass("active"),$("#menu-main-menu").fadeOut(300)})),$(document).on("click","#blog .btn-target",(function(e){e.preventDefault();var t=$(this).attr("href");location.href=t})),$(".header").addClass("h-blog"),$("body").removeClass("loading"),$(".fadeIn").fadeIn(600),$(".fadeIn2").fadeIn(600),$(".fadeIn3").fadeIn(600),$(".fadeIn7").fadeIn(600),$(".fadeIn8").fadeIn(600),$(document).on("click",".scroll-click-s",(function(e){e.preventDefault();const t=$(this).data("scroll");$([document.documentElement,document.body]).animate({scrollTop:$("#"+t).offset().top},"200")})),$(window).scroll((function(){$(this).scrollTop()>=600?$("#back-top").addClass("active"):$("#back-top").removeClass("active")})),$(document).on("click","#back-top",(function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},600)})),setTimeout((()=>{$(".search-btn").on("click",(function(e){e.preventDefault(),$(".searchbox").addClass("active"),$("body").css({overflow:"hidden"})})),$(".searchbox-remove").on("click",(function(e){e.preventDefault(),$(".searchbox").removeClass("active"),$("body").css({overflow:"auto"})}))}),1e3)}}),z=(0,F.A)(j,[["render",n]]),G=z}}]);
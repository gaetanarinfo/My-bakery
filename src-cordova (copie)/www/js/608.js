"use strict";(globalThis["webpackChunkorg_mybakery_app"]=globalThis["webpackChunkorg_mybakery_app"]||[]).push([[608],{5608:(e,t,a)=>{a.r(t),a.d(t,{default:()=>At});var s=a(2360),l=a(8352),o=a(6466);const r=(0,s.Fv)('<div class="background fadeIn2 bb background3"><div class="content"><h1 class="text-white">Gestion de mon compte</h1><div class="b-breadcrumb"><div class="b-breadcrumb"><ol class="breadcrumb"><li><a href="/" class="text-white">Accueil</a></li><li class="active">Gestion de mon compte</li></ol></div></div></div></div>',1),i={id:"my-account-profil",class:"section fadeIn3"},n={class:"container"},c={class:"row gutters-sm"},u={class:"col-md-3 mb-3"},d={class:"card"},m={class:"card-body"},f={class:"d-flex flex-column align-items-center text-center"},p=(0,s.Lk)("img",{class:"rounded-circle",src:"users/avatar.png",alt:""},null,-1),v={class:"mt-3"},k={class:"text-secondary text-bold mb-1"},g=(0,s.Lk)("i",{class:"fa-solid fa-briefcase text-blue me-1"},null,-1),b={class:"text-muted text-bold font-size-sm"},L=(0,s.Lk)("i",{class:"fa-solid fa-location-dot text-green me-1"},null,-1),h={class:"card mt-3"},_={class:"list-group list-clic list-group-flush"},y={id:"card1",class:"active-list list-group-item d-flex justify-content-between align-items-center flex-wrap"},x=(0,s.Lk)("p",{class:"mb-0"},[(0,s.Lk)("i",{class:"fa fa-user me-2"}),(0,s.eW)("Mon profil")],-1),w=[x],C={id:"card2",class:"list-group-item d-flex justify-content-between align-items-center flex-wrap"},A=(0,s.Lk)("p",{class:"mb-0"},[(0,s.Lk)("i",{class:"fa fa-edit me-2"}),(0,s.eW)("Modifier mon profil")],-1),W=[A],R={id:"card3",class:"list-group-item d-flex justify-content-between align-items-center flex-wrap"},P=(0,s.Lk)("i",{class:"fa fa-calendar me-2"},null,-1),T={class:"badge bg-warning float-right"},I={class:"list-group-item d-flex justify-content-between align-items-center flex-wrap"},K=(0,s.Lk)("p",{class:"mb-0"},[(0,s.Lk)("i",{class:"fa-solid fa-user-minus me-2"}),(0,s.eW)("Supprimer mon compte")],-1),U=[K],M={class:"col-md-9"},D={class:"card"},V={class:"panel-body bio-graph-info"},E=(0,s.Lk)("h3",{class:"text-bold"},"Mon profil",-1),F={class:"row"},N={class:"bio-row"},J=(0,s.Lk)("span",{class:"text-bold"},"Prénom ",-1),S={class:"bio-row"},O=(0,s.Lk)("span",{class:"text-bold"},"Nom ",-1),j={class:"bio-row"},q=(0,s.Lk)("span",{class:"text-bold"},"Location ",-1),G={class:"bio-row"},X=(0,s.Lk)("span",{class:"text-bold"},"Date de naissance",-1),Y={class:"bio-row"},z=(0,s.Lk)("span",{class:"text-bold"},"Poste ",-1),H={class:"bio-row"},B=(0,s.Lk)("span",{class:"text-bold"},"Email ",-1),Q={class:"bio-row mb-0"},Z={class:"mb-0"},ee=(0,s.Lk)("span",{class:"text-bold"},"Mobile ",-1),te={class:"bio-row mb-0"},ae={class:"mb-0"},se=(0,s.Lk)("span",{class:"text-bold"},"Téléphone ",-1),le={class:"card"},oe={id:"card-update-profil"},re=(0,s.Lk)("h3",{class:"text-bold"},"Modifier mon profil",-1),ie={method:"post",class:"d-grid bakery-detail"},ne={class:"p-2"},ce={class:"form-group"},ue=(0,s.Lk)("label",{for:"reg_firstname"},[(0,s.eW)("Prénom "),(0,s.Lk)("span",{class:"required"},"*")],-1),de=(0,s.Lk)("p",{class:"error-text reg_firstname_error"},null,-1),me={class:"p-2"},fe={class:"form-group"},pe=(0,s.Lk)("label",{for:"reg_lastname"},[(0,s.eW)("Nom "),(0,s.Lk)("span",{class:"required"},"*")],-1),ve=(0,s.Lk)("p",{class:"error-text reg_lastname_error"},null,-1),ke={class:"p-2"},ge={class:"form-group"},be=(0,s.Lk)("label",{for:"reg_function"},[(0,s.eW)("Poste occupé "),(0,s.Lk)("span",{class:"required"},"*")],-1),Le=(0,s.Lk)("p",{class:"error-text reg_function_error"},null,-1),he={class:"p-2"},_e={class:"form-group"},ye=(0,s.Lk)("label",{for:"reg_naissance"},[(0,s.eW)("Date de naissance "),(0,s.Lk)("span",{class:"required"},"*")],-1),$e=(0,s.Lk)("p",{class:"error-text reg_naissance_error"},null,-1),xe={class:"p-2"},we={class:"form-group"},Ce=(0,s.Lk)("label",{for:"reg_location"},[(0,s.eW)("Localisation "),(0,s.Lk)("span",{class:"required"},"*")],-1),Ae=(0,s.Lk)("p",{class:"error-text reg_location_error"},null,-1),We={class:"p-2"},Re={class:"form-group"},Pe=(0,s.Lk)("label",{for:"reg_mobile"},"Mobile",-1),Te={class:"p-2"},Ie={class:"form-group"},Ke=(0,s.Lk)("label",{for:"reg_phone"},"Téléphone fixe",-1),Ue=(0,s.Lk)("div",{class:"p-2"},null,-1),Me={class:"p-2"},De={class:"form-group woocomerce-FormRow form-row"},Ve={class:"card"},Ee={id:"activityCard"},Fe=(0,s.Lk)("h3",{class:"text-bold"},"Résumé de votre activité",-1),Ne={key:0,class:"table table-striped"},Je=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{scope:"col"}),(0,s.Lk)("th",{scope:"col"},"Nom"),(0,s.Lk)("th",{scope:"col"},"Crée le"),(0,s.Lk)("th",{scope:"col"})])],-1),Se=["id"],Oe={scope:"row"},je=["href"],qe=["href"],Ge=(0,s.Lk)("i",{class:"fa fa-eye"},null,-1),Xe=[Ge],Ye=["onClick"],ze=(0,s.Lk)("i",{class:"fa fa-trash"},null,-1),He=[ze],Be={key:1,class:"fw-bolder"},Qe=(0,s.Lk)("i",{class:"fa fa-warning text-warning"},null,-1);function Ze(e,t,a,$,x,A){const K=(0,s.g2)("HeaderComponent"),Ge=(0,s.g2)("Section7"),ze=(0,s.g2)("FooterComponent");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(K),r,(0,s.Lk)("div",i,[(0,s.Lk)("div",n,[(0,s.Lk)("div",c,[(0,s.Lk)("div",u,[(0,s.Lk)("div",d,[(0,s.Lk)("div",m,[(0,s.Lk)("div",f,[p,(0,s.Lk)("div",v,[(0,s.Lk)("h4",null,(0,l.v_)(e.firstname+" "+e.lastname),1),(0,s.Lk)("p",k,[g,(0,s.eW)(" "+(0,l.v_)(e.fonction),1)]),(0,s.Lk)("p",b,[L,(0,s.eW)(" "+(0,l.v_)(e.location),1)])])])])]),(0,s.Lk)("div",h,[(0,s.Lk)("ul",_,[(0,s.Lk)("li",y,[(0,s.Lk)("a",{onClick:t[0]||(t[0]=(...t)=>e.showProfil&&e.showProfil(...t))},w)]),(0,s.Lk)("li",C,[(0,s.Lk)("a",{onClick:t[1]||(t[1]=(...t)=>e.showUpdateProfil&&e.showUpdateProfil(...t))},W)]),(0,s.Lk)("li",R,[(0,s.Lk)("a",{onClick:t[2]||(t[2]=(...t)=>e.showActivity&&e.showActivity(...t))},[P,(0,s.eW)("Activité récente "),(0,s.Lk)("span",T,(0,l.v_)(e.activity),1)])]),(0,s.Lk)("li",I,[(0,s.Lk)("a",{onClick:t[3]||(t[3]=(...t)=>e.deleteAccount&&e.deleteAccount(...t))},U)])])])]),(0,s.Lk)("div",M,[(0,s.bo)((0,s.Lk)("div",D,[(0,s.Lk)("div",V,[E,(0,s.Lk)("div",F,[(0,s.Lk)("div",N,[(0,s.Lk)("p",null,[J,(0,s.eW)(": "+(0,l.v_)(e.firstname),1)])]),(0,s.Lk)("div",S,[(0,s.Lk)("p",null,[O,(0,s.eW)(": "+(0,l.v_)(e.lastname),1)])]),(0,s.Lk)("div",j,[(0,s.Lk)("p",null,[q,(0,s.eW)(": "+(0,l.v_)(e.location),1)])]),(0,s.Lk)("div",G,[(0,s.Lk)("p",null,[X,(0,s.eW)(": "+(0,l.v_)(e.naissance),1)])]),(0,s.Lk)("div",Y,[(0,s.Lk)("p",null,[z,(0,s.eW)(": "+(0,l.v_)(e.fonction),1)])]),(0,s.Lk)("div",H,[(0,s.Lk)("p",null,[B,(0,s.eW)(": "+(0,l.v_)(e.email),1)])]),(0,s.Lk)("div",Q,[(0,s.Lk)("p",Z,[ee,(0,s.eW)(": "+(0,l.v_)(e.mobile),1)])]),(0,s.Lk)("div",te,[(0,s.Lk)("p",ae,[se,(0,s.eW)(": "+(0,l.v_)(e.phone),1)])])])])],512),[[o.aG,e.cardProfil]]),(0,s.bo)((0,s.Lk)("div",le,[(0,s.Lk)("div",oe,[re,(0,s.Lk)("form",ie,[(0,s.Lk)("div",ne,[(0,s.Lk)("p",ce,[ue,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=t=>e.reg_firstname=t),type:"text",class:"form-control",name:"firstname",id:"reg_firstname"},null,512),[[o.Jo,e.reg_firstname]]),de])]),(0,s.Lk)("div",me,[(0,s.Lk)("p",fe,[pe,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=t=>e.reg_lastname=t),type:"text",class:"form-control",name:"lastname",id:"reg_lastname"},null,512),[[o.Jo,e.reg_lastname]]),ve])]),(0,s.Lk)("div",ke,[(0,s.Lk)("p",ge,[be,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=t=>e.reg_function=t),type:"text",placeholder:"ex : Ouvrier",class:"form-control",name:"function",id:"reg_function"},null,512),[[o.Jo,e.reg_function]]),Le])]),(0,s.Lk)("div",he,[(0,s.Lk)("p",_e,[ye,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=t=>e.reg_naissance=t),placeholder:"02/12/1999",type:"text",class:"form-control",name:"naissance",id:"reg_naissance"},null,512),[[o.Jo,e.reg_naissance]]),$e])]),(0,s.Lk)("div",xe,[(0,s.Lk)("p",we,[Ce,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=t=>e.reg_location=t),placeholder:"ex : Le Mans",type:"text",class:"form-control",name:"location",id:"reg_location"},null,512),[[o.Jo,e.reg_location]]),Ae])]),(0,s.Lk)("div",We,[(0,s.Lk)("p",Re,[Pe,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=t=>e.reg_mobile=t),type:"tel",class:"form-control",name:"mobile",id:"reg_mobile"},null,512),[[o.Jo,e.reg_mobile]])])]),(0,s.Lk)("div",Te,[(0,s.Lk)("p",Ie,[Ke,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=t=>e.reg_phone=t),type:"tel",class:"form-control",name:"fixe",id:"reg_phone"},null,512),[[o.Jo,e.reg_phone]])])]),Ue,(0,s.Lk)("div",Me,[(0,s.Lk)("p",De,[(0,s.Lk)("button",{onClick:t[11]||(t[11]=(...t)=>e.updateProfil&&e.updateProfil(...t)),type:"submit",class:"btn btn-bakery"},"Valider")])])])])],512),[[o.aG,e.cardUpdateProfil]]),(0,s.bo)((0,s.Lk)("div",Ve,[(0,s.Lk)("div",Ee,[Fe,e.activityTable.length>=1?((0,s.uX)(),(0,s.CE)("table",Ne,[Je,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.activityTable,(t=>((0,s.uX)(),(0,s.CE)("tr",{id:"activityRow-"+t.id,key:t.id},[(0,s.Lk)("th",Oe,(0,l.v_)(t.id),1),(0,s.Lk)("td",null,[(0,s.Lk)("a",{href:"#/bakery/"+t.url},(0,l.v_)(t.title),9,je)]),(0,s.Lk)("td",null,(0,l.v_)(e.moment(t.userCreatedAt).format("DD MMMM YYYY")),1),(0,s.Lk)("td",null,[(0,s.Lk)("a",{href:"#/bakery/"+t.url,class:"text-success cursor-pointer me-2"},Xe,8,qe),(0,s.Lk)("a",{onClick:a=>e.deleteActivity(t.id),class:"text-danger cursor-pointer"},He,8,Ye)])],8,Se)))),128))])])):((0,s.uX)(),(0,s.CE)("p",Be,[Qe,(0,s.eW)(" Vous n'avez pas encore d'activité sur My Nakery. ")]))])],512),[[o.aG,e.cardActivity]])])])])]),(0,s.bF)(Ge),(0,s.bF)(ze)],64)}a(3128),a(5801),a(2506);var et=a(5992),tt=a(7130),at=a(5541),st=a(2804),lt=a.n(st),ot=a(4824),rt=a(5387),it=a(2418),nt=a(1338),ct=a(5701),ut=a(8769);lt().locale("fr");const dt=(0,ot.KR)(null),mt=(0,ot.KR)(null),ft=(0,ot.KR)(null),pt=(0,ot.KR)(null),vt=(0,ot.KR)(null),kt=(0,ot.KR)(null),gt=(0,ot.KR)(null),bt=(0,ot.KR)(null),Lt=(0,ot.KR)(!0),ht=(0,ot.KR)(!1),_t=(0,ot.KR)(!1),yt=(0,ot.KR)(0),$t=(0,ot.KR)([]),xt=(0,s.pM)({name:"MyAccountProfil",data(){return{email:dt,firstname:mt,lastname:ft,fonction:pt,location:vt,phone:kt,mobile:gt,naissance:bt,cardProfil:Lt,cardUpdateProfil:ht,cardActivity:_t,v$:(0,et.Ay)(),activity:yt,activityTable:$t,reg_naissance:null,reg_firstname:null,reg_lastname:null,reg_function:null,reg_location:null,reg_mobile:null,reg_phone:null}},setup(){const e=(0,tt.Pj)(),t=(0,ot.KR)(!1),a=(0,ot.KR)(!0),l=(0,at.A)(),o=(0,s.EW)((()=>e.state.stateUser)),r=(0,s.EW)((()=>e.state.stateUser.user));return l.notify.registerType("success-form",{icon:"fa-solid fa-check",progress:!1,color:"green-6",textColor:"white",classes:"glossy",timeout:3500}),l.notify.registerType("error-form",{icon:"fa-solid fa-xmark",progress:!1,color:"red-6",textColor:"white",classes:"glossy",timeout:3500}),{deleteActivity(e){confirm("Êtes-vous sûr de vouloir supprimer cette activité ?")&&ut.A.get("https://serveur.my-bakery.fr/user-activity-delete/"+this.user.email+"/"+this.user.id+"/"+e).then((t=>{200===t.status&&($("#activityRow-"+e).fadeOut(200),$("#activityRow-"+e).remove())}))},showProfil(){Lt.value=!0,ht.value=!1,_t.value=!1,$("#card1").addClass("active-list"),$("#card2").removeClass("active-list"),$("#card3").removeClass("active-list")},showUpdateProfil(){Lt.value=!1,ht.value=!0,_t.value=!1,$("#card1").removeClass("active-list"),$("#card2").addClass("active-list"),$("#card3").removeClass("active-list")},showActivity(){Lt.value=!1,ht.value=!1,_t.value=!0,$("#card1").removeClass("active-list"),$("#card2").removeClass("active-list"),$("#card3").addClass("active-list")},showTextLoading(e=null){t.value=!0,$(".u-column1").fadeOut(300),$(".u-column2").fadeOut(300),a.value=!1,null===e&&setTimeout((()=>{t.value=!1,a.value=!0}),3e3)},deleteAccount(){confirm("Êtes-vous sûr de vouloir supprimer votre compte My Bakery ?")&&ut.A.get("https://serveur.my-bakery.fr/user-delete/"+this.user.email+"/"+this.user.id).then((e=>{200===e.status&&(sessionStorage.removeItem("token"),window.location.reload())}))},showNotif(e){l.notify({type:"success-form",message:e})},errorNotif(e=null){l.notify({type:"error-form",message:e||"Une erreur est survenue dans le formulaire."})},visible:t,user:r,stateUser:o,moment:lt(),Cookies:rt.A,showSimulatedReturnData:a}},components:{HeaderComponent:it.A,Section7:ct.A,FooterComponent:nt.A},methods:{updateProfil(e){e.preventDefault(),this.v$.$validate(),this.reg_firstname&&this.reg_lastname&&this.reg_function&&reg_location&&(this.showTextLoading(),ut.A.post("https://serveur.my-bakery.fr/update-profil",{id:this.user.id,email:this.user.email,firstname:this.reg_firstname,lastname:this.reg_lastname,naissance:this.reg_naissance,fonction:this.reg_function,location:this.reg_location,phone:this.reg_phone,mobile:this.reg_mobile}).then((e=>{!0===e.data.success?(this.showNotif("Votre inscription a bien été pris en compte, un email de validation vous a été adressé !"),setTimeout((()=>{$(document).find(".error-text").text(""),$(document).find(".error-text").removeAttr()}),3500)):this.errorNotif(e.data.message)})).catch((e=>{this.errorNotif()}))),this.reg_firstname?($(".reg_firstname_error").removeAttr(),$(".reg_firstname_error").text("")):($(".reg_firstname_error").attr("style","display: block"),$(".reg_firstname_error").text("Le champs prénom est obligatoire !")),this.reg_lastname?($(".reg_lastname_error").removeAttr(),$(".reg_lastname_error").text("")):($(".reg_lastname_error").attr("style","display: block"),$(".reg_lastname_error").text("Le champs nom est obligatoire !")),this.reg_function?($(".reg_function_error").removeAttr(),$(".reg_function_error").text("")):($(".reg_function_error").attr("style","display: block"),$(".reg_function_error").text("Le champs fonction est obligatoire !")),this.reg_location?($(".reg_location_error").removeAttr(),$(".reg_location_error").text("")):($(".reg_location_error").attr("style","display: block"),$(".reg_location_error").text("Le champs location est obligatoire !"))}},validations(){return{}},mounted(){null===sessionStorage.getItem("token")&&this.$router.push("/"),setTimeout((()=>{null!==sessionStorage.getItem("token")?(ut.A.get("https://serveur.my-bakery.fr/user-profil/"+this.user.email).then((e=>{200===e.status&&(Lt.value=!0,ht.value=!1,_t.value=!1,$("#card1").addClass("active-list"),$("#card2").removeClass("active-list"),$("#card3").removeClass("active-list"),dt.value=e.data.user.email,mt.value=e.data.user.firstname,ft.value=e.data.user.lastname,vt.value=e.data.user.location,pt.value=e.data.user.fonction,kt.value=e.data.user.phone,gt.value=e.data.user.mobile,bt.value=e.data.user.naissance,this.reg_firstname=e.data.user.firstname,this.reg_lastname=e.data.user.lastname,this.reg_location=e.data.user.location,this.reg_function=e.data.user.fonction,this.reg_phone=e.data.user.phone,this.reg_mobile=e.data.user.mobile,this.reg_naissance=e.data.user.naissance)})),ut.A.get("https://serveur.my-bakery.fr/user-activity/"+this.user.email+"/"+this.user.id).then((e=>{200===e.status&&(yt.value=e.data.activity==[]?0:e.data.activity.counterId,$t.value=e.data.activityTable)}))):this.$router.push("/")}),200),$("#menu-main-menu").removeAttr("style"),$(document).on("click",".menu-toggle-2:not(.active)",(function(e){e.preventDefault(),$(this).addClass("active"),$("#menu-main-menu").fadeIn(300)})),$(document).on("click",".menu-toggle-2.active",(function(e){e.preventDefault(),$(this).removeClass("active"),$("#menu-main-menu").fadeOut(300)})),$(document).on("click","#menu-main-menu .menu-item",(function(e){$(".menu-toggle-2").removeClass("active"),$("#menu-main-menu").fadeOut(300)})),$(document).on("click","#blog .btn-target",(function(e){e.preventDefault();var t=$(this).attr("href");vt.href=t})),$(".header").addClass("h-blog"),$("body").removeClass("loading"),$(".fadeIn").fadeIn(600),$(".fadeIn2").fadeIn(600),$(".fadeIn3").fadeIn(600),$(".fadeIn7").fadeIn(600),$(".fadeIn8").fadeIn(600),$(document).on("click",".scroll-click-s",(function(e){e.preventDefault();const t=$(this).data("scroll");$([document.documentElement,document.body]).animate({scrollTop:$("#"+t).offset().top},"slow")})),$(window).scroll((function(){$(this).scrollTop()>=600?$("#back-top").addClass("active"):$("#back-top").removeClass("active")})),$(document).on("click","#back-top",(function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},600)})),setTimeout((()=>{$(".search-btn").on("click",(function(e){e.preventDefault(),$(".searchbox").addClass("active"),$("body").css({overflow:"hidden"})})),$(".searchbox-remove").on("click",(function(e){e.preventDefault(),$(".searchbox").removeClass("active"),$("body").css({overflow:"auto"})}))}),1e3)}});var wt=a(8497);const Ct=(0,wt.A)(xt,[["render",Ze]]),At=Ct}}]);